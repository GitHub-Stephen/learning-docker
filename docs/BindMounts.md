---
outline: deep
---

## Bind Mounts

Bind mounts åœ¨ Docker æ—©æœŸå°±å·²ç»å­˜åœ¨ï¼Œç›¸å¯¹äº volumes ,å®ƒæœ‰ä¸€å®šçš„é™åˆ¶ã€‚ åœ¨ä½¿ç”¨ bind mount æ—¶ï¼Œå®é™…æ˜¯æŠŠå®¿ä¸»æœºçš„ï¼ˆç»å¯¹è·¯å¾„ï¼‰ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ volume ï¼Œåˆ™æ˜¯ç”± Docker çš„å­˜å‚¨è·¯å¾„æ¥è¿›è¡ŒæŒ‚è½½æ˜ å°„ï¼Œå­˜å‚¨å†…å®¹ç”± Docker è¿›è¡Œç®¡ç†ã€‚

Docker å°†ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºæ–‡ä»¶ã€ç›®å½•ï¼Œå³ä½¿å®¿ä¸»æœºä¸å­˜åœ¨æŒ‚è½½çš„ç›®å½•ã€‚Bind mounts ç›¸å¯¹æ€§èƒ½è¾ƒé«˜ï¼Œä½†æ˜¯å…¶ä¾èµ–å®¿ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯èƒ½ä¼šå¯¼è‡´æ‚¨åœ¨å…¶ä»–äº‹é¡¹ï¼ˆæ–‡ä»¶æƒé™å¤„ç†ï¼‰èŠ±è´¹æ—¶é—´ã€‚ å¦‚æœæ‚¨æ˜¯å¼€å‘ Docker åº”ç”¨çš„æ–°æ‰‹ï¼Œå»ºè®®ä½¿ç”¨ å…·åvolume (named volumes)ã€‚ å¦å¤–ï¼ŒBind mounts ä¹Ÿæ— æ³•é€šè¿‡ Docker CLI commonds è¿›è¡Œç®¡ç†ã€‚

## é€‰æ‹© `-v` æˆ–è€… `--mounts` æ ‡è¯†

é€šå¸¸ï¼Œ`--mounts`ä¼šæ¯”è¾ƒæ¸…æ™°ä¸”å†—é•¿ã€‚`-v`çš„è¯­æ³•åˆ™æ˜¯å°†æ‰€æœ‰é€‰é¡¹ä»¥å‚æ•°çš„å½¢å¼åˆ—å‡ºã€‚

> ğŸ’¡æç¤º
> <br>
> å¯¹äºæ–°æ‰‹ï¼Œå¯èƒ½å­¦ä¹ `--mounts`ä¼šæ¯”è¾ƒå¿«ï¼›å¯¹æ‰‹ç†Ÿæ‚‰ Docker çš„å¼€å‘è€…ï¼Œ`-v`åˆ™ä¼šç›¸å¯¹æ¯”è¾ƒç†Ÿæ‚‰ï¼›ä¸è¿‡é€šå¸¸å»ºè®®ä½¿ç”¨`--mounts`ï¼Œå› ä¸ºå…¶ç›¸å¯¹å®¹æ˜“ä½¿ç”¨ã€‚

`-v`å’Œ`--mount`çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒ[Volume - é€‰æ‹© `-v` æˆ–è€… `--mounts` æ ‡è¯†](https://www.baidu.com)ã€‚


## `-v` å’Œ `--mounts`çš„ä¸åŒè¡¨ç°

ç”±äº`-v`æˆ–`--volume`åœ¨ Docker æ—©æœŸå°±å·²ç»å­˜åœ¨ï¼Œæ‰€ä»¥ä»–ä»¬çš„è¿ä½œæ¨¡å¼ä¸ä¼šè¢«æ”¹å˜ï¼Œé‚£ä¹ˆåŒºåˆ«æ˜¯åœ¨`-v`å’Œ`--mounts`ä¸Šï¼š

- å¦‚æœæ‚¨ä½¿ç”¨`-v`æˆ–è€…`--volume`å» bind-mount æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œï¼ˆè¿™äº›æ–‡ä»¶ã€ç›®å½•ï¼‰å¹¶ä¸å­˜åœ¨äºå®¿ä¸»æœºä¸Šï¼ŒDocker ä¼šæä¾›ä¸€ä¸ªå…¥å£ï¼Œå¾€å¾€æ˜¯ä»¥åˆ›å»ºç›®å½•çš„å½¢å¼ï¼›

- å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯`--mounts`æ¥ bind-mount æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œï¼ˆè¿™äº›æ–‡ä»¶ã€ç›®å½•ï¼‰å¹¶ä¸å­˜åœ¨äºå®¿ä¸»æœºä¸Šï¼ŒDocker **ä¸ä¼š** è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ï¼Œç›®å½•ï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

## ä½¿ç”¨ bind mount çš„æ–¹å¼æ¥å¯åŠ¨ä¸€ä¸ªå®¹å™¨

æˆ‘ä»¬å¯ä»¥å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼Œ ï¼ˆåœ¨å®¿ä¸»æœºï¼‰æœ‰ä¸€ä¸ªæºç çš„ç›®å½•å¦‚`source`ï¼Œé€šè¿‡æ‰“åŒ…åï¼Œç”Ÿæˆçš„æ„å»ºåŒ…ï¼ˆå¦‚jarï¼‰ä¼šå­˜æ”¾åœ¨`source/target`ç›®å½•ä¸‹ã€‚æˆ‘ä»¬å¸Œæœ›å®¹å™¨ä¸­çš„`/app/`ç›®å½•èƒ½è¯»å–åˆ°æ„å»ºåŒ…ã€‚

### ä½¿ç”¨`--mount` 

```shell
[root@localhost home]# docker run -d   -it   --name devtest   --mount type=bind,source="$(pwd)"/target,target=/app   nginx:latest
```

ä»¥ä¸Šå‘½ä»¤ï¼Œè¡¨ç¤ºæŒ‚è½½æ–¹å¼ä¸º bind mountï¼Œ`source`æ˜¯å½“å‰å·¥ä½œç›®å½• $(pwd) ä¸‹çš„ target ç›®å½•ï¼Œå®¹å™¨å†…ç›®æ ‡è·¯å¾„æ˜¯ /app

å¦‚æœ source ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™ Docker å°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š
```shell
docker: Error response from daemon: invalid mount config for type "bind": bind source path does not exist: /home/target.
```

æˆ‘ä»¬åªè¦åœ¨å®¿ä¸»æœºåˆ›å»ºæ­£ç¡®çš„ç›®å½•(home/target)ï¼Œå†æ‰§è¡Œ`--mount`å³å¯æˆåŠŸæŒ‚è½½å¹¶å¯åŠ¨å®¹å™¨ã€‚

### ä½¿ç”¨`-v`

```shell
[root@localhost home]# docker run -d   -it   --name devtest   -v "$(pwd)"/target:/app   nginx:latest
```

ä¸`--mount`çš„åŒºåˆ«åœ¨äºï¼Œ`-v`ä¼šè‡ªåŠ¨åˆ›å»ºå®¿ä¸»æœºçš„ç›®å½•ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`docker inspect devtest`æŸ¥çœ‹ä¸‹æŒ‚è½½æƒ…å†µï¼š

```shell
 "Mounts": [
    {
        "Type": "bind",
        "Source": "/home/target",
        "Destination": "/app",
        "Mode": "",
        "RW": true,
        "Propagation": "rprivate"
    }
],
```

## æŒ‚è½½åˆ°å®¹å™¨ä¸­éç©ºçš„ç›®å½•

å¦‚ä¹‹å‰ç« èŠ‚è¯´æ˜è¿‡ï¼ŒæŒ‚è½½åˆ°ä¸€ä¸ªéç©ºçš„ç›®å½•ï¼Œé‚£ä¹ˆè¯¥ç›®å½•çš„å†…å®¹ï¼Œå°†ä¼šè¢«**éšè—**ã€‚è¿™ä¸ª**éšè—**çš„ç‰¹æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨åŒä¸€é•œåƒï¼Œæ¥æµ‹è¯•ä¸åŒç‰ˆæœ¬çš„ Docker åº”ç”¨ã€‚










